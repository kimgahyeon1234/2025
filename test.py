import streamlit as st

st.set_page_config(page_title="응급처치 퀴즈", page_icon="🚑", layout="centered")

st.title("🚨 응급 상황 대처 퀴즈")
st.caption("학습 목적용입니다. 실제 응급상황에선 즉시 119에 신고하고, 지역 지침을 따르세요.")

# =============================
# 64문제 데이터: 8상황 × 8문제
# 보기 난이도를 약간 높여 헷갈리는 선택지를 포함했습니다.
# =============================
scenarios = {
    "🚗 교통사고": [
        {
            "question": "교통사고 현장에서 가장 먼저 해야 할 일은?",
            "options": [
                "부상자부터 차량 밖으로 이동시킨다",
                "2차 사고 방지를 위한 안전 조치(비상등/삼각대/안전거리 확보)",
                "블랙박스/현장 사진 촬영부터 한다",
            ],
            "answer": "2차 사고 방지를 위한 안전 조치(비상등/삼각대/안전거리 확보)",
            "explanation": "2차 사고가 발생하면 피해가 커집니다. 후방 경고와 안전거리 확보가 최우선입니다.",
        },
        {
            "question": "의식이 없는 부상자를 확인할 때 첫 순서는?",
            "options": ["출혈 확인 → 신고 → 호흡 확인", "의식 확인 → 호흡/맥박 확인", "신고 → 사진 촬영 → 이동"],
            "answer": "의식 확인 → 호흡/맥박 확인",
            "explanation": "반응 확인 후 즉시 호흡과 맥박을 평가해야 합니다.",
        },
        {
            "question": "환자를 현장에서 옮겨야 하는 합당한 경우는?",
            "options": ["추가 위험 없음", "화재/폭발 등 2차 위험", "목격자가 요청"],
            "answer": "화재/폭발 등 2차 위험",
            "explanation": "2차 위험이 임박한 경우를 제외하면 불필요한 이동은 금물입니다.",
        },
        {
            "question": "119 신고 시 우선 전달해야 할 정보는?",
            "options": ["사고 위치", "환자 상태", "현재 상황"],
            "answer": "사고 위치",
            "explanation": "정확한 위치가 구조 도착 시간을 좌우합니다.",
        },
        {
            "question": "출혈이 심한 환자에게 가장 먼저 시행할 처치는?",
            "options": ["상처 소독", "압박 지혈", "병원 이송"],
            "answer": "압박 지혈",
            "explanation": "깨끗한 천/거즈로 직접 압박하여 출혈을 우선 멈춥니다.",
        },
        {
            "question": "척추 손상이 의심되는 환자에게 적절한 대처는?",
            "options": ["자세를 편하게 바꿔준다", "절대 움직이지 않게 고정", "목만 들어 호흡을 편하게 한다"],
            "answer": "절대 움직이지 않게다"],
            "answer": "그대로 두고 보호한다",
            "explanation": "물집은 감염을 막는 장벽 역할을 하므로 임의로 터뜨리지 않습니다.",
        },
        {
            "question": "화상 부위에 옷이 달라붙었다. 어떻게 할까?",
            "options": ["강제로 떼어낸다", "그대로 둔 채 의료진에게 맡긴다", "기름을 발라 떼어낸다"],
            "answer": "그대로 둔 채 의료진에게 맡긴다",
            "explanation": "무리한 제거는 조직 손상을 키웁니다. 주변부만 가위로 자르고 붙은 부분은 그대로.",
        },
        {
            "question": "넓은 범위 화상/얼굴 화상 발생 시 우선 조치로 적절한 것은?",
            "options": ["연고 도포 후 대기", "119 신고 및 신속 이송", "차가운 물에 전신을 담근다"],
            "answer": "119 신고 및 신속 이송",
            "explanation": "기도 손상/쇼크 위험이 커 즉시 전문 치료가 필요합니다.",
        },
        {
            "question": "통증 완화를 위해 피해야 할 것은?",
            "options": ["얼음 직접 적용", "깨끗한 거즈로 보호", "진통제 복용(지시하에)"],
            "answer": "얼음 직접 적용",
            "explanation": "저체온과 조직 괴사 위험으로 얼음은 금물입니다.",
        },
        {
            "question": "화학물질 화상 시 최우선 처치는?",
            "options": ["연고 도포", "흐르는 물로 장시간 세척", "붕대 감기"],
            "answer": "흐르는 물로 장시간 세척",
            "explanation": "화학물질을 희석/제거해야 합니다. 분말이면 마른 브러싱 후 세척.",
        },
        {
            "question": "전기 화상 환자에게 반드시 확인해야 할 것은?",
            "options": ["피부 색 변화만", "심장 리듬/의식 상태", "통증 호소 여부"],
            "answer": "심장 리듬/의식 상태",
            "explanation": "전기 손상은 내부 손상과 부정맥 위험이 큽니다.",
        },
        {
            "question": "화상 환자가 창백/빠른 맥/식은땀을 보인다. 적절한 대처는?",
            "options": ["찬물 더 붓기", "다리 올리고 보온 + 119", "걸어다니게 하여 순환 촉진"],
            "answer": "다리 올리고 보온 + 119",
            "explanation": "쇼크 의심. 저혈량성 쇼크 예방을 위해 보온/하지 거상/신속 이송이 필요합니다.",
        },
    ],

    "❤️ 심정지": [
        {
            "question": "심정지 의심 환자 발견 시 첫 단계는?",
            "options": ["AED 찾기", "의식 확인(반응 확인)", "즉시 인공호흡"],
            "answer": "의식 확인(반응 확인)",
            "explanation": "어깨 두드리며 반응을 확인하고, 무반응이면 도움을 요청합니다.",
        },
        {
            "question": "무반응/비정상 호흡(or 무호흡) 확인 후의 조치는?",
            "options": ["119 신고 및 AED 요청", "물 마시게 하기", "회복자세"],
            "answer": "119 신고 및 AED 요청",
            "explanation": "신고와 AED 확보가 생존사슬의 핵심입니다.",
        },
        {
            "question": "성인 흉부압박 깊이는?",
            "options": ["약 2~3cm", "약 5~6cm", "10cm 이상"],
            "answer": "약 5~6cm",
            "explanation": "충분한 깊이(흉곽의 1/3 정도)를 유지합니다.",
        },
        {
            "question": "흉부압박 속도(성인)는?",
            "options": ["분당 60~80회", "분당 100~120회", "분당 140회 이상"],
            "answer": "분당 100~120회",
            "explanation": "너무 빠르면 충분한 이완이 어렵고, 느리면 관류가 떨어집니다.",
        },
        {
            "question": "압박:호흡의 비율(1인 구조자, 성인)은?",
            "options": ["15:2", "30:2", "50:5"],
            "answer": "30:2",
            "explanation": "표준 비율은 30회 압박 후 2회 인공호흡입니다(교육 이수자에 한함).",
        },
        {
            "question": "AED가 도착했다. 올바른 순서는?",
            "options": ["전원 켬 → 패드 부착 → 음성 지시 따름", "충격 버튼 먼저 누름", "패드 부착 전 가슴털 제거는 불필요"],
            "answer": "전원 켬 → 패드 부착 → 음성 지시 따름",
            "explanation": "AED의 음성 지시에 따르며, 필요한 경우 패드 부착부의 땀/털 제거.",
        },
        {
            "question": "흉부압박을 중단해도 되는 시점은?",
            "options": ["환자 자발호흡/움직임 회복", "압박자가 피곤할 때", "2분마다 반드시 중단"],
            "answer": "환자 자발호흡/움직임 회복",
            "explanation": "전문인력 인계, AED 분석/충격, 위험 제거 등의 예외를 제외하고 중단 금지.",
        },
        {
            "question": "심정지 발견 후 효과적 생존율을 높이려면 몇 분 내 압박을 시작해야 하나?",
            "options": ["1분 이내", "약 4분 이내", "10분 후"],
            "answer": "약 4분 이내",
            "explanation": "무산소 손상 전의 골든타임 확보가 핵심입니다.",
        },
    ],

    "🩸 출혈": [
        {
            "question": "외상성 출혈 시 가장 먼저 시행할 처치는?",
            "options": ["상처 세척", "직접 압박 지혈", "환자 수분 보충"],
            "answer": "직접 압박 지혈",
            "explanation": "깨끗한 천/거즈로 바로 강하게 눌러 지혈합니다.",
        },
        {
            "question": "지혈이 잘 안 될 때 다음으로 고려할 수 있는 것은?",
            "options": ["압박 강도/위치 재조정", "상처를 자주 확인", "붕대 자주 교체"],
            "answer": "압박 강도/위치 재조정",
            "explanation": "압박을 유지한 채 필요한 경우 추가 패드 위에 더 눌러줍니다.",
        },
        {
            "question": "사지 출혈 시 도움이 되는 자세는?",
            "options": ["상처를 심장보다 높게", "상처를 심장보다 낮게", "누운 자세 금지"],
            "answer": "상처를 심장보다 높게",
            "explanation": "정맥 귀환을 줄여 출혈을 완화할 수 있습니다.",
        },
        {
            "question": "지혈대(압박대) 사용이 고려되는 상황은?",
            "options": ["경미한 찰과상", "직접 압박으로 통제되지 않는 심한 사지 출혈", "얼굴 상처"],
            "answer": "직접 압박으로 통제되지 않는 심한 사지 출혈",
            "explanation": "생명 위중한 사지 출혈에서 지혈대를 사용합니다(사용법 숙지 필요).",
        },
        {
            "question": "코피 시 올바른 자세는?",
            "options": ["고개를 뒤로 젖힘", "앞으로 살짝 숙여 콧등/콧망울 압박", "눕는다"],
            "answer": "앞으로 살짝 숙여 콧등/콧망울 압박",
            "explanation": "뒤로 젖히면 혈액을 삼켜 기도 자극/구토 유발 위험이 있습니다.",
        },
        {
            "question": "지혈 중 붕대를 자주 풀어 확인하면 안 되는 이유는?",
            "options": ["통증 유발", "응고가 깨져 재출혈", "붕대 오염"],
            "answer": "응고가 깨져 재출혈",
            "explanation": "압박을 지속해야 응고가 안정됩니다.",
        },
        {
            "question": "쇼크 의심(창백, 빠른 맥, 차가운 피부) 시 적절한 처치는?",
            "options": ["다리 거상 및 보온", "물/음료 제공", "빠르게 앉혀서 대화"],
            "answer": "다리 거상 및 보온",
            "explanation": "순환을 돕고 저체온을 방지합니다. 음료 제공은 흡인 위험.",
        },
        {
            "question": "상처에 이물(큰 파편)이 깊게 박힌 경우 첫 처치는?",
            "options": ["즉시 제거", "제거하지 말고 고정 후 이송", "강하게 문질러 소독"],
            "answer": "제거하지 말고 고정 후 이송",
            "explanation": "임의 제거는 출혈을 악화시킬 수 있습니다. 주변 고정 후 병원 이송.",
        },
    ],

    "😮‍💨 기도 막힘": [
        {
            "question": "성인 부분 기도폐쇄(기침 가능) 시 우선 조치는?",
            "options": ["즉시 하임리히법", "기침 유도 및 관찰", "등 두드리기부터"],
            "answer": "기침 유도 및 관찰",
            "explanation": "스스로 배출 가능한 경우 기침을 지속하도록 격려합니다.",
        },
        {
            "question": "완전 기도폐쇄(기침/발성 불가) 성인에게 시행하는 것은?",
            "options": ["복부 밀어올리기(하임리히법)", "물 마시게 하기", "코를 막고 숨 불어넣기"],
            "answer": "복부 밀어올리기(하임리히법)",
            "explanation": "뒤에서 양팔로 감싸 배꼽 위 명치 아래를 빠르게 위로 밀어올립니다.",
        },
        {
            "question": "하임리히법 압박 위치로 옳은 것은?",
            "options": ["명치 정중앙", "배꼽 바로 위(명치 아래)", "가슴 중앙"],
            "answer": "배꼽 바로 위(명치 아래)",
            "explanation": "검지/중지로 배꼽 찾은 뒤 주먹을 그 위 명치 아래에 놓습니다.",
        },
        {
            "question": "의식 잃은 기도폐쇄 환자에게 우선 시행은?",
            "options": ["CPR 시작 및 이물 확인", "물 억지로 마시게 하기", "앉혀서 기침 유도"],
            "answer": "CPR 시작 및 이물 확인",
            "explanation": "가슴압박 후 기도 개방 시 보이는 이물이 있을 때만 제거합니다(맹목적 소지는 금지).",
        },
        {
            "question": "영아(1세 미만) 기도폐쇄 올바른 처치는?",
            "options": ["하임리히법", "등 타격 5회 + 가슴압박 5회 반복", "손가락으로 입 안을 쓸어 제거"],
            "answer": "등 타격 5회 + 가슴압박 5회 반복",
            "explanation": "영아는 복부 밀어올리기를 시행하지 않습니다.",
        },
        {
            "question": "기도폐쇄 의심 시 하면 안 되는 행동은?",
            "options": ["손가락을 깊숙이 넣어 이물 파내기", "등 타격/복부 밀어올리기", "119 신고"],
            "answer": "손가락을 깊숙이 넣어 이물 파내기",
            "explanation": "맹목적 탐색은 더 깊이 밀어 넣어 악화시킬 수 있습니다.",
        },
        {
            "question": "이물 배출 후 환자가 괜찮아 보여도 필요한 조치는?",
            "options": ["귀가 조치", "의료기관 평가(지연 부종/손상 확인)", "물 섭취 권장"],
            "answer": "의료기관 평가(지연 부종/손상 확인)",
            "explanation": "기도 부종이나 미세 흡인이 지연 발생할 수 있습니다.",
        },
        {
            "question": "임신부/비만 성인 기도폐쇄 시 대체 술기는?",
            "options": ["흉골 하부 복부 밀어올리기 지속", "흉골 중앙 흉부압박(가슴 밀어올리기)", "무처치 관찰"],
            "answer": "흉골 중앙 흉부압박(가슴 밀어올리기)",
            "explanation": "복부 압박 대신 흉부를 빠르게 안쪽/위쪽으로 밀어 올립니다.",
        },
    ],

    "🌊 익사": [
        {
            "question": "물에 빠진 사람을 발견했다. 가장 먼저 할 일은?",
            "options": ["바로 물에 뛰어든다", "주변에 도움 요청 및 119 신고", "옷을 벗고 수영 준비"],
            "answer": "주변에 도움 요청 및 119 신고",
            "explanation": "자 구조는 2차 사고 위험이 큽니다. 먼저 신고/도움 요청.",
        },
        {
            "question": "안전한 구조 원칙은?",
            "options": ["Reach/Throw/Row/Go 순으로 접근", "무조건 수영해 끌어낸다", "잠수하여 밀어 올린다"],
            "answer": "Reach/Throw/Row/Go 순으로 접근",
            "explanation": "막대기/로프/튜브 등 도구 활용 → 보트 → 최후에 입수.",
        },
        {
            "question": "물에서 건진 후 의식이 없다. 첫 조치는?",
            "options": ["물을 토하게 한다", "호흡/맥박 확인", "손발 마사지"],
            "answer": "호흡/맥박 확인",
            "explanation": "호흡이 없으면 즉시 CPR을 시작합니다.",
        },
        {
            "question": "익수 후 무호흡. 우선 시작해야 할 처치는?",
            "options": ["하임리히법", "흉부압박(필요시 인공호흡 포함)", "측위로 눕혀 물 배출"],
            "answer": "흉부압박(필요시 인공호흡 포함)",
            "explanation": "물 배출을 위한 복부 밀어올리기는 권장되지 않습니다.",
        },
        {
            "question": "인공호흡:흉부압박의 기본 비율은(성인 1인 구조자)?",
            "options": ["15:2", "30:2", "10:1"],
            "answer": "30:2",
            "explanation": "표준 CPR 비율을 따릅니다.",
        },
        {
            "question": "익수 환자에게 억지로 물을 토하게 하면 안 되는 이유는?",
            "options": ["폐 손상/흡인 위험", "체온 상승 위험", "쇼크 예방 때문"],
            "answer": "폐 손상/흡인 위험",
            "explanation": "억지 토하기는 흡인/구토/지연 합병증 위험을 높입니다.",
        },
        {
            "question": "저체온 의심 시 올바른 대처는?",
            "options": ["따뜻한 목욕 즉시", "담요/마른 옷으로 보온", "알코올 마시게 하기"],
            "answer": "담요/마른 옷으로 보온",
            "explanation": "급격 가온은 부정맥 유발 가능. 서서히 핵심부 보온.",
        },
        {
            "question": "익수 후 회복되어도 병원 평가가 필요한 이유는?",
            "options": ["지연성 폐부종 가능", "단순 탈진 확인", "필수 아님"],
            "answer": "지연성 폐부종 가능",
            "explanation": "수시간 후 폐부종/저산소증이 발생할 수 있습니다.",
        },
    ],

    "🐍 동물·곤충 물림": [
        {
            "question": "뱀에 물렸을 때 초기 대처로 옳은 것은?",
            "options": ["상처를 절개/흡인", "환부를 심장보다 낮게 하고 안정", "얼음찜질로 독 확산 억제"],
            "answer": "환부를 심장보다 낮게 하고 안정",
            "explanation": "불필요한 움직임을 줄여 독의 확산을 늦춥니다. 절개/흡인은 금지.",
        },
        {
            "question": "뱀 교상 후 하면 안 되는 것은?",
            "options": ["지나치게 꽉 조이는 지혈대 사용", "119 신고", "상처 고정"],
            "answer": "지나치게 꽉 조이는 지혈대 사용",
            "explanation": "조직 괴사/신경 손상 위험. 의료진 지시 없는 지혈대 남용 금지.",
        },
        {
            "question": "벌에 쏘였을 때 우선 조치는?",
            "options": ["침을 조심스럽게 제거", "침을 짜내며 압박", "연고 먼저 바르기"],
            "answer": "침을 조심스럽게 제거",
            "explanation": "신용카드 모서리 등으로 긁어 제거 후 냉찜질.",
        },
        {
            "question": "쏘임 후 전신 두드러기/호흡곤란/어지럼. 의심되는 상태는?",
            "options": ["단순 피부 반응", "아나필락시스", "탈수"],
            "answer": "아나필락시스",
            "explanation": "전신 증상 동반 시 전신 알레르기 반응으로 간주합니다.",
        },
        {
            "question": "아나필락시스 의심 시 1차 처치는?",
            "options": ["에피네프린 자동주사 사용", "항히스타민 복용만", "찬물 마시기"],
            "answer": "에피네프린 자동주사 사용",
            "explanation": "지연 없이 허벅지 외측 근육주사. 119 신고 병행.",
        },
        {
            "question": "들개/야생동물 교상 후 필요한 것은?",
            "options": ["상처 세척 후 광견병 예방접종 평가", "집에서 경과 관찰", "연고만 바르기"],
            "answer": "상처 세척 후 광견병 예방접종 평가",
            "explanation": "광견병/파상풍 위험 평가와 예방접종이 필요합니다.",
        },
        {
            "question": "독사 교상 후 환부를 칼로 절개하는 행위는?",
            "options": ["독 제거에 도움", "감염/조직 손상 위험으로 금지", "통증 감소"],
            "answer": "감염/조직 손상 위험으로 금지",
            "explanation": "절개/흡인은 이득 없이 해가 큽니다.",
        },
        {
            "question": "동물 교상 후 파상풍 예방이 필요한 이유는?",
            "options": ["체온 상승 때문", "상처로 세균 감염 위험", "혈액순환 문제 때문"],
            "answer": "상처로 세균 감염 위험",
            "explanation": "오염 상처는 파상풍균 노출 위험이 있습니다.",
        },
    ],

    "🌪️ 재난(지진·화재 등)": [
        {
            "question": "지진 발생 직후 실내에서의 올바른 행동은?",
            "options": ["엘리베이터로 대피", "튼튼한 테이블 아래로 들어가 머리 보호", "창문을 열고 구경"],
            "answer": "튼튼한 테이블 아래로 들어가 머리 보호",
            "explanation": "떨어지는 물체로부터 머리를 보호하고 진동이 멎을 때까지 대기.",
        },
        {
            "question": "야외 대피 시 피해야 할 곳은?",
            "options": ["유리창/간판/전깃줄 아래", "넓은 공터", "운동장"],
            "answer": "유리창/간판/전깃줄 아래",
            "explanation": "낙하/감전 위험 구역을 피합니다.",
        },
        {
            "question": "화재 발생 시 가장 먼저 해야 할 일은?",
            "options": ["귀중품 챙기기", "크게 외쳐 알리고 경보/119 신고", "연기를 먼저 환기"],
            "answer": "크게 외쳐 알리고 경보/119 신고",
            "explanation": "초기 경보와 신속 신고가 생명과 피해를 줄입니다.",
        },
        {
            "question": "연기가 가득한 복도를 통과할 때 적절한 방법은?",
            "options": ["똑바로 서서 달린다", "젖은 천으로 코·입 가리고 낮은 자세로 이동", "엘리베이터 사용"],
            "answer": "젖은 천으로 코·입 가리고 낮은 자세로 이동",
            "explanation": "연기는 위로 상승하므로 바닥 가까이가 상대적으로 안전합니다.",
        },
        {
            "question": "화재 건물에 갇혔다. 우선 행동은?",
            "options": ["창문 깨고 뛰어내리기", "119 신고 후 위치 알리고 문틈 막기", "복도로 나가 연기 확인"],
            "answer": "119 신고 후 위치 알리고 문틈 막기",
            "explanation": "문틈을 젖은 수건 등으로 막고 구조 신호를 보냅니다.",
        },
        {
            "question": "지진 후 건물 밖으로 이동할 때 주의점은?",
            "options": ["전봇대/외벽 근처 통과", "낙하물 위험 지역 회피", "신발 벗고 빠르게 이동"],
            "answer": "낙하물 위험 지역 회피",
            "explanation": "외벽, 간판, 유리창 아래는 피합니다.",
        },
        {
            "question": "대규모 재난 시 개인 행동 원칙으로 맞는 것은?",
            "options": ["질서 유지·지시에 따르기", "영상 촬영 우선", "먼저 혼자 탈출"],
            "answer": "질서 유지·지시에 따르기",
            "explanation": "혼란을 줄이고 구조 효율을 높입니다.",
        },
        {
            "question": "지진 후 가스 냄새가 난다. 적절한 조치는?",
            "options": ["스위치를 켜서 불을 켠다", "밸브 잠그고 환기·출입 통제 후 신고", "무시하고 생활"],
            "answer": "밸브 잠그고 환기·출입 통제 후 신고",
            "explanation": "화재/폭발 예방을 위해 점화원 차단과 신고가 필요합니다.",
        },
    ],
}

# =============================
# 세션 상태
# =============================
if "step" not in st.session_state:
    st.session_state.step = 0
if "score" not in st.session_state:
    st.session_state.score = 0
if "current" not in st.session_state:
    st.session_state.current = None

# 사이드바: 상황 선택 및 진행률
with st.sidebar:
    st.header("학습 설정")
    situation = st.selectbox("상황 선택", list(scenarios.keys()))
    total = len(scenarios[situation])
    st.progress(0 if total == 0 else st.session_state.step/total)
    st.caption("⏱️ 정답 제출 후 자동으로 다음 단계로 이동합니다.")

# 새로운 상황 선택 시 초기화
if st.session_state.current != situation:
    st.session_state.current = situation
    st.session_state.step = 0
    st.session_state.score = 0

questions = scenarios[situation]

# =============================
# 퀴즈 본문
# =============================
if st.session_state.step < len(questions):
    idx = st.session_state.step
    q = questions[idx]
    st.subheader(f"문제 {idx+1} / {len(questions)}")
    st.write(q["question"]) 

    choice = st.radio("정답을 고르세요:", q["options"], key=f"q_{situation}_{idx}")

    col1, col2 = st.columns([1,1])
    with col1:
        submit = st.button("제출", key=f"submit_{situation}_{idx}")
    with col2:
        skip = st.button("건너뛰기", key=f"skip_{situation}_{idx}")

    if submit:
        if choice == q["answer"]:
            st.success("✅ 정답입니다! 잘하셨어요.")
            st.session_state.score += 1
        else:
            st.error("❌ 오답입니다.")
            st.info(f"👉 정답: {q['answer']}")
        st.write(q["explanation"])
        st.session_state.step += 1
    elif skip:
        st.warning("⏭️ 문제를 건너뛰었습니다. 다음 문제로 이동합니다.")
        st.info(f"참고: {q['answer']}")
        st.session_state.step += 1
else:
    st.success("🎉 해당 상황의 모든 문제를 완료했습니다!")
    st.metric("점수", f"{st.session_state.score} / {len(questions)}")

    ratio = st.session_state.score / len(questions)
    if ratio == 1:
        st.balloons()
        st.write("🏆 완벽해요! 실제 상황에서도 차분히 대처하실 수 있어요.")
    elif ratio >= 0.75:
        st.write("👍 아주 잘하셨어요. 조금만 더 연습하면 완벽!")
    elif ratio >= 0.5:
        st.write("🙂 보통입니다. 틀린 문제의 해설을 복습해 보세요.")
    else:
        st.write("📚 더 연습이 필요해요. 해설을 꼼꼼히 읽고 다시 도전! 💪")

    if st.button("🔄 다시 풀기"):
        st.session_state.step = 0
        st.session_state.score = 0

st.divider()
st.caption("❗ 이 앱은 교육용이며, 실제 응급상황에서는 즉시 119에 신고하고 최신 지역 지침과 인증된 교육 내용을 따르세요.")
